// Generated by CoffeeScript 1.4.0
var Label,Task,ViewModel,fs;fs=require("fs"),Task=function(e){return this.description=ko.observable(e),this},Label=function(e,t){return this.title=ko.observable(e),this.tasks=ko.observableArray(t),this},ViewModel=function(e){var t,n,r,i,s,o,u,a,f,l,c=this;n={};for(o=0,a=e.length;o<a;o++){i=e[o],r=new Task(i.description),l=i.labels;for(u=0,f=l.length;u<f;u++)t=l[u],n.hasOwnProperty(t)?n[t].push(r):n[t]=[r]}return console.log("labels: ",n),this.labels=ko.observableArray(function(){var t;t=[];for(s in n)e=n[s],t.push(new Label(s,e));return t}()),this.selectedTask=ko.observable(),this.clearSelectedTask=function(){return c.selectedTask("")},this.selectTask=function(e){return c.selectedTask(e)},this.addTask=function(){return i=new Task(""),c.selectedTask(i),c.labels()[0].tasks.push(i)},this.trash=ko.observableArray(),this},ko.bindingHandlers.sortableList={init:function(e,t,n,r){return $(e).data("sortList",t()),$(e).sortable({update:function(e,t){var n,r,i,s;n=t.item.data("sortItem");if(n)return i=t.item.data("parentList"),r=t.item.parent().data("sortList"),s=ko.utils.arrayIndexOf(t.item.parent().children(),t.item[0]),s>=0&&(i.remove(n),r.splice(s,0,n)),t.item.remove()},connectWith:".container"})}},ko.bindingHandlers.sortableItem={init:function(e,t){var n;return n=t(),$(e).data("sortItem",n.item),$(e).data("parentList",n.parentList)}},ko.bindingHandlers.visibleAndSelect={update:function(e,t){ko.bindingHandlers.visible.update(e,t);if(t())return setTimeout(function(){return $(e).focus().select()},0)}},$(function(){var e,t;return e="./.ideahub",fs.exists(e,function(t){return t||fs.mkdir(e),fs.readdir(e,function(e,t){return console.log(t)})}),t=[{description:"Get dog food",labels:["To do"]},{description:"Mow lawn",labels:["To do"]},{description:"Fix car",labels:["To do"]},{description:"Fix fence",labels:["Doing"]},{description:"Walk dog",labels:["Doing"]},{description:"Read book",labels:["Doing"]}],ko.applyBindings(new ViewModel(t))});